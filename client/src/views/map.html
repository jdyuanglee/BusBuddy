<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Assistant|Comfortaa" rel="stylesheet">
    <link rel="stylesheet" href="css/screen.css">
    <link rel="stylesheet" href="style.css">
    <title>BusBuddy | Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js" integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
        crossorigin=""></script>

    <style>
        @keyframes dash {
        to {
            stroke-dashoffset: 0;
        }
        }

        .path{
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: dash 5s linear forwards;
        }
    </style>

</head>
<div id="root"></div>
<body>
	<div id="mapid" style="margin: 0 auto; width: 90vw; height: 90vh; border: 3px solid orange; border-radius: 10px;"></div>
    <input type="text" id="current_center">
    <button id="fly">Fly</button>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>

        var mymap = L.map('mapid').setView([39.95449073417355, -75.19163131713867], 15);

        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
            maxZoom: 18,
            // attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
            //     '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
            //     'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets'
        }).addTo(mymap);

        var marker = L.marker([51.5, -0.09]).addTo(mymap);

        // var circle = L.circle([39.95593818515614, -75.18313407897949
        // ], {
        //         color: 'red',
        //         fillColor: '#f03',
        //         fillOpacity: 0.5,
        //         radius: 100
        //     }).addTo(mymap);

        var polygon = L.polygon([

            [
                39.954864936085286,
                -75.18327355384828
            ],
            [
                39.95454007959778,
                -75.18117070198059
            ],
            [
                39.955621557871375,
                -75.18072545528412
            ],
            [
                39.95631649115873,
                -75.18044650554657
            ],
            [
                39.95670301904338,
                -75.18053233623505
            ],
            [
                39.95692917796283,
                -75.18162667751314
            ],
            [
                39.957036089191675,
                -75.18278002738953
            ],
            [
                39.954864936085286,
                -75.18327355384828
            ],
        ], {
                color: 'red',
                fillColor: '#f03',
                strokeWidth: 0.5,
                fillOpacity: 0.5,
                radius: 100
            }).addTo(mymap).bindPopup('SCHOOL');

        L.marker([39.960477719069125, -75.20210266113281]).addTo(mymap).openPopup('My Location');

        var mapIcon = new L.Icon({
            iconUrl: 'drexel.png',
            iconSize: [38, 38],
            iconAnchor: [19, 19],
            popupAnchor: [-3, -76]
        });
        var mapIcon2 = new L.Icon({
            iconUrl: 'temple.png',
            iconSize: [38, 38],
            iconAnchor: [19, 19],
            popupAnchor: [-3, -76]
        });

        L.marker([39.95521446349413, -75.19845485687256], { icon: mapIcon }).addTo(mymap);
        L.marker([39.98162534206613, -75.15729904174805], { icon: mapIcon2 }).addTo(mymap);


        var geoJSON = {
            "type": "FeatureCollection",
            "features": [
                {
                    "type": "Feature",
                    "properties": {},
                    "geometry": {
                        "type": "LineString",
                        "coordinates": [
                            [
                                -75.20214557647705,
                                39.9604119308746
                            ],
                            [
                                -75.19778966903687,
                                39.96074087121421
                            ],
                            [
                                -75.19115924835205,
                                39.95725402310209
                            ],
                            [
                                -75.19184589385986,
                                39.9542440065183
                            ],
                            [
                                -75.18369197845459,
                                39.953339330834154
                            ],
                            [
                                -75.18313407897949,
                                39.95593818515614
                            ]
                        ]
                    }
                }
            ]
        }

        L.geoJSON(geoJSON, {
            style: function (feature) {
                return {
                    color: '#F9A602',
                    weight: '5',
                    // dashArray: '100',
                    // dashOffset: '100',
                    className: 'path'
                    // icon: mapIcon,
                }
            }
        }).addTo(mymap);

        mymap.on('moveend', function (e) {
            $('#current_center').val(mymap.getCenter().lat + ',' + mymap.getCenter().lng);
        });

        $(document).on('click', '#fly', function () {
            mymap.flyTo([39.98162534206613, -75.15729904174805], 15);
        });


        // var map = L.map('map', {
        //     renderer: L.canvas()
        // });
    </script>
</body>
</html>