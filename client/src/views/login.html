<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Assistant|Comfortaa" rel="stylesheet">
    <link rel="stylesheet" href="css/screen.css">
    <!-- <link rel="stylesheet" href="style.css"> -->
    <title>Login | BusBuddy</title>
    <style>.cls-1{fill:#3271ca;}.cls-2{fill:none;stroke:#fff;stroke-linecap:round;stroke-miterlimit:10;}</style>
    <style type="text/css">.bus_img,.c-header-text,.c-sign-in-btn a,nav ul{text-align:center}.c-gear,.c-spacing__1,.c-spacing__2,.dot,nav ul li{display:inline-block}body{font-family:Assistant,sans-serif;max-width:440px;margin:0 auto;background:#F9FEFF;border-radius:25px;color:#032A4A;overflow-y:hidden;height:100vh}.c-header-splash,.c-sign-in-btn a,input[type=password],input[type=text]{font-family:comfortaa}body.open .c-header-splash{font-size:3em;margin-top:.4em}main{background-color:#fff;margin:2em auto;border-radius:15px;padding:1em;box-shadow:0 0 17px 1px rgba(0,0,0,.13);width:87%}input[type=password],input[type=text]{border-radius:10px;font-size:1.2em;box-shadow:0 0 17px 1px rgba(0,0,0,.13);border:none;padding:.5em .5em .5em 2em}.c-gear{float:right;width:35px;padding:.5em}.c-email-input,.c-password-input{margin:0-auto;padding:.5em;text-align:center}.c-sign-in-btn{position:relative}.c-sign-in-btn a{text-decoration:none;font-size:1.1em;position:absolute;width:100%;top:20px;color:#fff}.bus_img{margin:0 auto;padding:2em}.c-header-splash{font-size:4em;padding-left:.5em;margin-top:1.5em;padding-bottom:.5em;font-weight:700}.c-header-text,.c-header-white{font-family:Comfortaa,sans-serif}#sign-in__svg{margin-bottom:-.5em;width:100%}.sign-in-page{background-color:#3271CA;border-top-left-radius:12px;border-top-right-radius:12px}.c-header-text{font-size:3em;padding:.5em;font-weight:700}.c-header-subtext{font-size:2.5em;color:#3271CA}.c-header-white{color:#fff;font-weight:400;font-size:1.5em;padding-top:1em}.c-btn-login,.c-btn-signup{font-size:1em;font-family:Comfortaa}.c-btn-login,.c-btn-map-view{padding:.75em 2em;box-shadow:inset 0 -4px 0 rgba(0,0,0,.2);color:#032A4A;font-weight:700}.c-btn-login{border:none;background-color:#FDC03E;margin-top:-2.5em;border-radius:10px}.c-btn-signup,.c-spacing__1,.c-spacing__2,nav,nav ul,nav ul li{margin:0 auto}.c-btn-signup{border:none;padding:.75em 1.5em;background-color:#92CDFF;box-shadow:inset 0 -4px 0 rgba(0,0,0,.2);color:#032A4A;font-weight:700;border-radius:10px}.c-eta-text__meridiem,.c-eta-text__text,.c-eta-text__timer,nav ul li{font-family:Comfortaa,sans-serif}.c-spacing__1{padding:1em 1em 8em 3.75em}.c-spacing__2{padding:1em 1em 1em 2em}.dot{height:10px;width:10px;background-color:#bbb;border-radius:50%}.dot-active{background-color:#8DC562}nav ul{list-style-type:none;padding-left:0;width:360px;border:1px solid #4DAAF7;border-radius:10px;color:#B9B9B9}nav ul li{font-size:1.1em;padding:.5em 0 .5em .5em;width:30%}nav ul li:nth-child(2){border-left:1px solid #4DAAF7;border-right:1px solid #4DAAF7;background-color:#4DAAF7;color:#fff}.c-eta-text{text-align:right;padding:.5em;display:block}.c-eta-text__text{display:block;font-size:1.2em;margin-right:8em}.c-account-info,.c-eta-text__timer,.c-font-slider__large,.c-font-slider__small,.c-status-box,.c-subtext,.c-timeline,.c-timeline__item,.container,.slidecontainer{display:inline-block}.c-eta-text__timer{font-size:4em;font-weight:700;text-align:right}.c-eta-text__meridiem{font-size:1.5em}.c-status-box{position:relative;padding:1em;font-size:1.2em;width:150px;font-family:Comfortaa;background-color:#edf6f7;border-radius:15px;margin-bottom:2em}.c-status-box__neutral{color:#fdc03e}.c-status-box__positive{color:#8DC562}.c-status-box__negative{color:#E06565}.c-status-box:after{content:'';position:absolute;bottom:0;left:50%;width:0;height:0;border:20px solid transparent;border-top-color:#edf6f7;border-bottom:0;margin-left:-20px;margin-bottom:-20px}.c-status-box__negative::after{left:20%}.c-status-box__neutral::after{left:70%}.c-status-box__positive::after{left:80%}.c-timeline{width:300px;height:8px;background-color:#B9B9B9;border-radius:35px;margin:2em auto}.c-timeline__item{height:40px;width:40px;background-color:#FFF;border:6px solid #B9B9B9;border-radius:50%;margin:-1.3em .5em 1em}li .c-timeline__item{padding:.5em}.c-timeline__bus{margin-left:1.5em;margin-right:1.5em}.c-btn-map-view{float:right;border:none;font-size:1.1em;background-color:#FDC03E;margin-top:-2.5em;border-radius:10px;font-family:Comfortaa}.c-btn-detail-view,.c-btn-log-view{font-size:1.1em;padding:.75em 2em;box-shadow:inset 0 -4px 0 rgba(0,0,0,.2);margin-top:-4em;margin-right:1.5em;font-family:Comfortaa;font-weight:700;float:right;color:#032A4A}.c-btn-detail-view{border:none;background-color:#92CDFF;border-radius:10px}.c-btn-log-view{border:none;background-color:#FDC03E;border-radius:10px}.c-student-info{padding:1em 1em 5em;font-size:1.15em}.c-subheader{padding:1.5em;font-family:Comfortaa;font-weight:700;font-size:1.25em}.c-subtext{padding-left:1.7em;padding-bottom:2em;padding-top:0;font-size:1.1em}.c-account-info{float:right;padding-left:4em}.c-font-slider__small{margin-left:2em}.c-font-slider__large{font-size:2em;margin-left:2.5em}.slidecontainer{width:60%;margin:0 auto}.slider{-webkit-appearance:none;appearance:none;width:100%;height:8px;background:#d3d3d3;outline:0;margin:0 5em 12em 4em;text-align:center;border-radius:20px}.slider:hover{opacity:1}.slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#4DAAF7;cursor:pointer;border-radius:6px}.container{width:80%;position:relative;margin:0 auto 12px 1em;padding-left:35px;cursor:pointer;font-size:22px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:center}.container input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark{position:absolute;top:0;left:60px;height:25px;width:25px;background-color:#eee;border-radius:5px}.container:hover input~.checkmark{background-color:#ccc}.container input:checked~.checkmark{background-color:#4DAAF7}.checkmark:after{content:"";position:absolute;display:none}.container input:checked~.checkmark:after{display:block}.container .checkmark:after{left:9px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}.roadcontainer{overflow:hidden;position:relative;height:165px;width:400px;background-size:2400% 2400%}.road,.road-top-half{width:250%;position:absolute}@keyframes road-moving{100%{transform:translate(-2400px)}}@keyframes bus_stop-moving{100%{transform:translate(-1500px)}}.road{height:165px;background-color:#585858;border-top:10px solid #756D6D;border-bottom:20px solid #756D6D;bottom:0;margin-left:-10px;padding:0;z-index:-1}.road::before{content:" ";position:absolute;z-index:0;top:-17px;left:0;right:0;border:5px solid #000}.road-top-half{height:15px;left:-10%;top:30px;border-top:40px dashed #fff;margin-top:25px;animation:road-moving 10s infinite linear;transition:all 3s linear;z-index:-1}.bus_img{width:250px;margin-left:30px;z-index:9999;margin-top:-60px}.bus_stop{width:75px;animation:bus_stop-moving 5s infinite linear;margin-top:-200px;position:relative;top:-35px}.p2{transition:all .3s;bottom:0;position:absolute;width:100vw;height:80px;z-index:999;background-color:#F9FEFF;border-radius:10px;color:#032A4A}.header1{height:45px}@media only screen and (min-width:360px){main{margin-left:1em}}</style>

</head>
<body>

<header class="l-dashboard-header">
        <div class="c-header-splash">Bus<br /> Buddy</div>
    </header>
    <div class='roadcontainer'>
        <div class="road">
            <img class="bus_img" src="img/bus.svg" alt="school bus" />
            <img class="bus_stop" src="img/busstop.png" alt="bus stop" />
            <div class="road-top-half"></div>
            <div class="road-bottom-half"></div>
        </div>
    </div>
    <div class="p2" id="p2" ontouchstart="p2touchStart(event)" ontouchmove="p2touchMove(event)"
        ontouchend="p2touchEnd(event)">
        <div class="header1">
            <div class="c-sign-in-btn">
                <a href="javascript: ">Sign In</a>
                <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 440 63"><defs><style>.cls-1{fill:#3271ca;}.cls-2{fill:none;stroke:#fff;stroke-linecap:round;stroke-miterlimit:10;}</style></defs><path class="cls-1" d="M428,9H247.25V7.58A7.58,7.58,0,0,0,239.67,0H200.32a7.57,7.57,0,0,0-7.57,7.57V9H12.05A12,12,0,0,0,0,21.05v40.8A1.16,1.16,0,0,0,1.15,63h437.7A1.16,1.16,0,0,0,440,61.85V21.05A12.06,12.06,0,0,0,428,9Z"/><line class="cls-2" x1="203.25" y1="15" x2="219.75" y2="6"/><line class="cls-2" x1="236.75" y1="15" x2="220.25" y2="6"/>
                </svg>
            </div>
        </div>
        <div class="sign-in-page">
            <header class="l-dashboard-header">
                    <div class="c-header-text c-header-white"></div>
            </header>
            <div class="c-email-input">
                    <input class="email" type="text" placeholder="Email" name="email" id="email" />
            </div>
            <div class="c-password-input">
                    <input class="password" type="password" placeholder="Password" name="password" id="password" />
            </div>
            <div class="c-spacing__1">
                <button class="c-btn-signup">Sign Up</button>
            </div>
            <div class="c-spacing__2">
                <button class="c-btn-login" onclick="goDash()">Log In</button>
            </div>
        </div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        var startingY;
        var p2 = document.getElementById('p2');

        function p2touchStart(evt) {
            startingY = evt.touches[0].clientY;
        };

        function p2touchMove(evt) {
            var touch = evt.touches[0];
            var change = touch.clientY - startingY;
            console.log(change);
            if (change < 0) {
                return;
            }
            // p1.style.bottom = (change - screen.height) + 'px';
            //p2.style.top = change + 150 + 'px';
            p2.style.height = "300px";
            evt.preventDefault();
        };

        function p2touchEnd(evt) {
            var change = evt.changedTouches[0].clientY - startingY;
            var half = 50;
            change = Math.abs(change);
            console.log(change);

            //var half = screen.height / 4;
            if (change < half) {
                p2.style.bottom = '0vh';
                 p2.style.height = "80px";
                 console.log('closed');
                 document.getElementsByTagName('body')[0].classList.remove('open');
            } else {
                p2.style.bottom = '80px';
                 p2.style.height = "300px";
                p2.style.display = 'block';
                console.log('open');
                document.getElementsByTagName('body')[0].classList.add('open');
                // p2.style.display = 'none';
            }
        };
    </script>

    <script>
		function goDash(){
		
			const email = document.getElementById('email').value;
			const password = document.getElementById('password').value;
			//Send to message handler on the backend
			//mfcbone@gmail.com
			//blabla1
			var details = {
				"email": email,
				"password": password
			}

			var formBody = [];
			for (var property in details) {
			  var encodedKey = encodeURIComponent(property);
			  var encodedValue = encodeURIComponent(details[property]);
			  formBody.push(encodedKey + "=" + encodedValue);
			}
			formBody = formBody.join("&");

			details = JSON.stringify(details);

			fetch('/login', {
				method: 'POST',
				headers: {
					"Content-Type": "application/json"
				},
				body: details
			})
			.then(data => {
				console.log('Success.', data);
				window.location.replace('/dashboard')
			})
			.catch(err => {
				console.log('Error: ', err);
			});
		}
   </script>
</body>
</html>